
> pop-ma-dice@0.1.0 test
> jest __tests__

  console.log
    Tables already exist or error creating tables

      at log (__tests__/utils/test-helpers.ts:62:13)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.log
    Tables already exist or error creating tables

      at log (__tests__/utils/test-helpers.ts:62:13)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/database/database.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/database/database.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

FAIL __tests__/database/database.test.ts
  Database Integration Tests
    Player Operations
      ✕ should insert a player successfully (71 ms)
      ✕ should not allow duplicate player IDs (14 ms)
      ✕ should retrieve player stats (11 ms)
      ✕ should update player stats (11 ms)
    Game Session Operations
      ✕ should create a game session (11 ms)
      ✕ should update game session status (7 ms)
    Game Results Operations
      ✕ should record game result (8 ms)
    Queue Operations
      ✕ should add player to queue (10 ms)
      ✕ should remove player from queue (9 ms)
    Database Constraints
      ✓ should enforce foreign key constraints (10 ms)

  ● Database Integration Tests › Player Operations › should insert a player successfully

    AggregateError:

      28 |       const player = createMockPlayer()
      29 |
    > 30 |       await insertTestPlayer(pool, player.playerId, player.address)
         |       ^
      31 |       const result = await getPlayerFromDb(pool, player.playerId)
      32 |
      33 |       expect(result).toBeDefined()

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:30:7)

  ● Database Integration Tests › Player Operations › should not allow duplicate player IDs

    AggregateError:

      40 |       const player = createMockPlayer()
      41 |
    > 42 |       await insertTestPlayer(pool, player.playerId, player.address)
         |       ^
      43 |       
      44 |       // Try to insert duplicate
      45 |       try {

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:42:7)

  ● Database Integration Tests › Player Operations › should retrieve player stats

    AggregateError:

      59 |       const player = createMockPlayer()
      60 |
    > 61 |       await insertTestPlayer(pool, player.playerId, player.address)
         |       ^
      62 |       const result = await getPlayerFromDb(pool, player.playerId)
      63 |
      64 |       expect(result.wins).toBe(0)

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:61:7)

  ● Database Integration Tests › Player Operations › should update player stats

    AggregateError:

      71 |       const player = createMockPlayer()
      72 |
    > 73 |       await insertTestPlayer(pool, player.playerId, player.address)
         |       ^
      74 |       
      75 |       await pool.query(
      76 |         'UPDATE players SET wins = wins + 1, total_winnings = total_winnings + $1 WHERE player_id = $2',

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:73:7)

  ● Database Integration Tests › Game Session Operations › should create a game session

    AggregateError:

      90 |       const player2 = createMockPlayer()
      91 |
    > 92 |       await insertTestPlayer(pool, player1.playerId, player1.address)
         |       ^
      93 |       await insertTestPlayer(pool, player2.playerId, player2.address)
      94 |
      95 |       const sessionId = `session_${Date.now()}`

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:92:7)

  ● Database Integration Tests › Game Session Operations › should update game session status

    AggregateError:

      113 |       const player1 = createMockPlayer()
      114 |
    > 115 |       await insertTestPlayer(pool, player1.playerId, player1.address)
          |       ^
      116 |
      117 |       const sessionId = `session_${Date.now()}`
      118 |       await pool.query(

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:115:7)

  ● Database Integration Tests › Game Results Operations › should record game result

    AggregateError:

      141 |       const player2 = createMockPlayer()
      142 |
    > 143 |       await insertTestPlayer(pool, player1.playerId, player1.address)
          |       ^
      144 |       await insertTestPlayer(pool, player2.playerId, player2.address)
      145 |
      146 |       const gameId = `game_${Date.now()}`

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:143:7)

  ● Database Integration Tests › Queue Operations › should add player to queue

    AggregateError:

      167 |       const player = createMockPlayer()
      168 |
    > 169 |       await insertTestPlayer(pool, player.playerId, player.address)
          |       ^
      170 |
      171 |       await pool.query(
      172 |         'INSERT INTO game_queue (player_id) VALUES ($1)',

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:169:7)

  ● Database Integration Tests › Queue Operations › should remove player from queue

    AggregateError:

      186 |       const player = createMockPlayer()
      187 |
    > 188 |       await insertTestPlayer(pool, player.playerId, player.address)
          |       ^
      189 |       await pool.query(
      190 |         'INSERT INTO game_queue (player_id) VALUES ($1)',
      191 |         [player.playerId]

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/database/database.test.ts:188:7)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Error cleaning up test database: AggregateError: 
        at cleanupTestDatabase (__tests__/utils/test-helpers.ts:70:5)
        at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5) {
      code: 'ECONNREFUSED'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at error (__tests__/utils/test-helpers.ts:75:13)
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:18:5)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

FAIL __tests__/api/endpoints.test.ts
  API Endpoints Integration Tests
    POST /api/game/create
      ✕ should create a new game successfully (67 ms)
      ✕ should return error for invalid bet amount (11 ms)
      ✕ should return error for missing required fields (10 ms)
    GET /api/leaderboard
      ✕ should return leaderboard data (13 ms)
      ✕ should respect limit parameter (7 ms)
      ✕ should return empty array when no players exist (10 ms)
    GET /api/player/stats
      ✕ should return player stats (8 ms)
      ✕ should return 404 for non-existent player (16 ms)
      ✕ should return error when playerId is missing (23 ms)
    GET /api/game/state
      ✕ should return game state (18 ms)
      ✕ should return error when gameId is missing (15 ms)
    POST /api/roll
      ✕ should handle roll request (19 ms)
    GET /api/winnings/unclaimed
      ✕ should return unclaimed winnings (9 ms)
    GET /api/winnings/history
      ✕ should return winnings history (16 ms)

  ● API Endpoints Integration Tests › POST /api/game/create › should create a new game successfully

    TypeError: fetch failed

      27 |       const mockRequest = createMockGameRequest()
      28 |       
    > 29 |       const response = await fetch('http://localhost:3000/api/game/create', {
         |                        ^
      30 |         method: 'POST',
      31 |         headers: { 'Content-Type': 'application/json' },
      32 |         body: JSON.stringify(mockRequest),

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:29:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › POST /api/game/create › should return error for invalid bet amount

    TypeError: fetch failed

      42 |       const mockRequest = createMockGameRequest({ betAmount: 'invalid' })
      43 |       
    > 44 |       const response = await fetch('http://localhost:3000/api/game/create', {
         |                        ^
      45 |         method: 'POST',
      46 |         headers: { 'Content-Type': 'application/json' },
      47 |         body: JSON.stringify(mockRequest),

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:44:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › POST /api/game/create › should return error for missing required fields

    TypeError: fetch failed

      52 |
      53 |     it('should return error for missing required fields', async () => {
    > 54 |       const response = await fetch('http://localhost:3000/api/game/create', {
         |                        ^
      55 |         method: 'POST',
      56 |         headers: { 'Content-Type': 'application/json' },
      57 |         body: JSON.stringify({}),

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:54:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/leaderboard › should return leaderboard data

    TypeError: fetch failed

      64 |   describe('GET /api/leaderboard', () => {
      65 |     it('should return leaderboard data', async () => {
    > 66 |       const response = await fetch('http://localhost:3000/api/leaderboard?limit=10')
         |                        ^
      67 |       
      68 |       expect(response.status).toBe(200)
      69 |       const data = await response.json()

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:66:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/leaderboard › should respect limit parameter

    TypeError: fetch failed

      72 |
      73 |     it('should respect limit parameter', async () => {
    > 74 |       const response = await fetch('http://localhost:3000/api/leaderboard?limit=5')
         |                        ^
      75 |       
      76 |       expect(response.status).toBe(200)
      77 |       const data = await response.json()

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:74:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/leaderboard › should return empty array when no players exist

    TypeError: fetch failed

      80 |
      81 |     it('should return empty array when no players exist', async () => {
    > 82 |       const response = await fetch('http://localhost:3000/api/leaderboard?limit=10')
         |                        ^
      83 |       
      84 |       expect(response.status).toBe(200)
      85 |       const data = await response.json()

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:82:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/player/stats › should return player stats

    AggregateError:

      93 |       const player = createMockPlayer()
      94 |       
    > 95 |       await insertTestPlayer(pool, player.playerId, player.address)
         |       ^
      96 |       
      97 |       const response = await fetch(
      98 |         `http://localhost:3000/api/player/stats?playerId=${player.playerId}`

      at ../node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (__tests__/api/endpoints.test.ts:95:7)

  ● API Endpoints Integration Tests › GET /api/player/stats › should return 404 for non-existent player

    TypeError: fetch failed

      107 |
      108 |     it('should return 404 for non-existent player', async () => {
    > 109 |       const response = await fetch(
          |                        ^
      110 |         'http://localhost:3000/api/player/stats?playerId=non_existent_player'
      111 |       )
      112 |       

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:109:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/player/stats › should return error when playerId is missing

    TypeError: fetch failed

      115 |
      116 |     it('should return error when playerId is missing', async () => {
    > 117 |       const response = await fetch('http://localhost:3000/api/player/stats')
          |                        ^
      118 |       
      119 |       expect(response.status).toBe(400)
      120 |     })

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:117:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/game/state › should return game state

    TypeError: fetch failed

      123 |   describe('GET /api/game/state', () => {
      124 |     it('should return game state', async () => {
    > 125 |       const response = await fetch('http://localhost:3000/api/game/state?gameId=test_game_123')
          |                        ^
      126 |       
      127 |       // Should either return 200 with data or 404 if game doesn't exist
      128 |       expect([200, 404]).toContain(response.status)

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:125:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/game/state › should return error when gameId is missing

    TypeError: fetch failed

      130 |
      131 |     it('should return error when gameId is missing', async () => {
    > 132 |       const response = await fetch('http://localhost:3000/api/game/state')
          |                        ^
      133 |       
      134 |       expect(response.status).toBe(400)
      135 |     })

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:132:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › POST /api/roll › should handle roll request

    TypeError: fetch failed

      138 |   describe('POST /api/roll', () => {
      139 |     it('should handle roll request', async () => {
    > 140 |       const response = await fetch('http://localhost:3000/api/roll', {
          |                        ^
      141 |         method: 'POST',
      142 |         headers: { 'Content-Type': 'application/json' },
      143 |         body: JSON.stringify({

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:140:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/winnings/unclaimed › should return unclaimed winnings

    TypeError: fetch failed

      154 |   describe('GET /api/winnings/unclaimed', () => {
      155 |     it('should return unclaimed winnings', async () => {
    > 156 |       const response = await fetch(
          |                        ^
      157 |         'http://localhost:3000/api/winnings/unclaimed?playerId=test_player'
      158 |       )
      159 |       

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:156:24)

    Cause:
    AggregateError:


  ● API Endpoints Integration Tests › GET /api/winnings/history › should return winnings history

    TypeError: fetch failed

      164 |   describe('GET /api/winnings/history', () => {
      165 |     it('should return winnings history', async () => {
    > 166 |       const response = await fetch(
          |                        ^
      167 |         'http://localhost:3000/api/winnings/history?playerId=test_player&limit=10'
      168 |       )
      169 |       

      at Object.<anonymous> (__tests__/api/endpoints.test.ts:166:24)

    Cause:
    AggregateError:


  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

PASS __tests__/game/game-engine.test.ts
  Game Engine Integration Tests
    Dice Rolling
      ✓ should roll two dice with values between 1 and 6 (6 ms)
      ✓ should generate different rolls on multiple calls (1 ms)
    Game Outcome Determination
      ✓ should identify winning rolls (Pop) (7 ms)
      ✓ should identify losing rolls (Krap) (3 ms)
      ✓ should identify continue rolls (null outcome) (2 ms)
    Game Session Creation
      ✓ should create a game session correctly (3 ms)
      ✓ should add second player to game session (2 ms)
    Game Rules Validation
      ✓ should validate Pop Ma Dice winning rules (12 ms)
      ✓ should validate Krap losing rules (2 ms)
      ✓ should validate continue rules (null outcome) (4 ms)
    Game Execution
      ✓ should execute a round successfully (3 ms)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: TransportError: xhr poll error
        at XHR.onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transport.js:48:37)
        at Request.<anonymous> (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
        at Request.Emitter.emit (/home/wethinkcode/Pop Ma Dice/node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
        at Request._onError (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
        at Timeout._onTimeout (/home/wethinkcode/Pop Ma Dice/node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7) {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |       return
      20 |     }
    > 21 |     originalError.call(console, ...args)
         |                   ^
      22 |   }
      23 | })
      24 |

      at console.call [as error] (jest.setup.js:21:19)
      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

FAIL __tests__/websocket/websocket.test.ts
  WebSocket Integration Tests
    Connection
      ✕ should connect to WebSocket server (188 ms)
      ✕ should have a valid socket ID (21 ms)
      ✕ should disconnect gracefully (17 ms)
    Event Emission
      ✕ should emit and receive game:update event (19 ms)
      ✕ should emit and receive leaderboard:update event (15 ms)
      ✕ should emit and receive player:stats event (19 ms)
    Room Management
      ✕ should join a room (33 ms)
      ✕ should leave a room (41 ms)
      ✕ should broadcast to room members (47 ms)
    Game Events
      ✕ should handle game:start event (25 ms)
      ✕ should handle game:roll event (12 ms)
      ✕ should handle game:result event (15 ms)
    Error Handling
      ✕ should handle connection errors (12 ms)
      ✕ should handle invalid events gracefully (9 ms)
    Real-time Updates
      ✕ should receive real-time leaderboard updates (11 ms)
      ✕ should handle multiple concurrent events (39 ms)
    Reconnection
      ✕ should reconnect after disconnect (18 ms)

  ● WebSocket Integration Tests › Connection › should connect to WebSocket server

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Connection › should have a valid socket ID

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Connection › should disconnect gracefully

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Event Emission › should emit and receive game:update event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Event Emission › should emit and receive leaderboard:update event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Event Emission › should emit and receive player:stats event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should join a room

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should join a room

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should join a room

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should join a room

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should leave a room

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should leave a room

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should leave a room

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should leave a room

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Room Management › should broadcast to room members

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:start event

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:start event

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:start event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:start event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:roll event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Game Events › should handle game:result event

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Error Handling › should handle connection errors

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Error Handling › should handle invalid events gracefully

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should receive real-time leaderboard updates

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Real-time Updates › should handle multiple concurrent events

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    Expected done to be called once, but it was called multiple times. Reason: [Error: xhr poll error]

      20 |     socket.on('connect_error', (error) => {
      21 |       console.error('Connection error:', error)
    > 22 |       done(error)
         |       ^
      23 |     })
      24 |   })
      25 |

      at Socket.done (__tests__/websocket/websocket.test.ts:22:7)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  ● WebSocket Integration Tests › Reconnection › should reconnect after disconnect

    xhr poll error

      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:37)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

  console.error
    Connection error: [TransportError: xhr poll error] {
      description: 0,
      context: XMLHttpRequest {
        UNSENT: 0,
        OPENED: 1,
        HEADERS_RECEIVED: 2,
        LOADING: 3,
        DONE: 4,
        readyState: 4,
        onreadystatechange: [Function (anonymous)],
        responseText: 'AggregateError: \n' +
          '    at internalConnectMultiple (node:net:1134:18)\n' +
          '    at afterConnectMultiple (node:net:1715:7)\n' +
          '    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
        responseXML: '',
        response: <Buffer >,
        status: 0,
        statusText: [AggregateError: ] { code: 'ECONNREFUSED' },
        open: [Function (anonymous)],
        setDisableHeaderCheck: [Function (anonymous)],
        setRequestHeader: [Function (anonymous)],
        getResponseHeader: [Function (anonymous)],
        getAllResponseHeaders: [Function (anonymous)],
        getRequestHeader: [Function (anonymous)],
        send: [Function (anonymous)],
        handleError: [Function (anonymous)],
        abort: [Function (anonymous)],
        addEventListener: [Function (anonymous)],
        removeEventListener: [Function (anonymous)],
        dispatchEvent: [Function (anonymous)]
      },
      type: 'TransportError'
    }

      19 |
      20 |     socket.on('connect_error', (error) => {
    > 21 |       console.error('Connection error:', error)
         |               ^
      22 |       done(error)
      23 |     })
      24 |   })

      at Socket.error (__tests__/websocket/websocket.test.ts:21:15)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onerror (../node_modules/socket.io-client/build/cjs/socket.js:457:18)
      at Manager.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket.onError (../node_modules/socket.io-client/build/cjs/manager.js:158:18)
      at Socket.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Socket._onError (../node_modules/engine.io-client/build/cjs/socket.js:519:14)
      at XHR.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at XHR.onError (../node_modules/engine.io-client/build/cjs/transport.js:48:15)
      at Request.<anonymous> (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:64:18)
      at Request.Emitter.emit (../node_modules/@socket.io/component-emitter/lib/cjs/index.js:143:20)
      at Request._onError (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:173:14)
      at Timeout._onTimeout (../node_modules/engine.io-client/build/cjs/transports/polling-xhr.js:146:30)

/home/wethinkcode/Pop Ma Dice/pop-ma-dice/__tests__/websocket/websocket.test.ts:22
            done(error);
            ^

[ErrorWithStack: Caught error after test environment was torn down

Failed: [Error: xhr poll error]]

Node.js v22.19.0
PASS __tests__/contracts/smart-contract.test.ts
  Smart Contract Integration Tests
    Contract Configuration
      ✓ should have valid contract address (2 ms)
      ✓ should have valid ABI definitions (2 ms)
      ✓ should have ERC20 ABI defined (1 ms)
    ABI Function Definitions
      ✓ should have placeBet function (1 ms)
      ✓ should have rollDice function (1 ms)
      ✓ should have continueRoll function (3 ms)
      ✓ should have claimWinnings function
      ✓ should have getGameState function (2 ms)
      ✓ should have getPlayerStats function (2 ms)
    ERC20 ABI Functions
      ✓ should have approve function (1 ms)
      ✓ should have balanceOf function (1 ms)
      ✓ should have transfer function (11 ms)
    Contract Events
      ✓ should have BetPlaced event (1 ms)
      ✓ should have GameFinished event (1 ms)
    Contract Parameter Validation
      ✓ should validate bet amount format (1 ms)
      ✓ should handle large bet amounts
      ✓ should handle small bet amounts
    Contract Address Validation
      ✓ should validate Ethereum address format (1 ms)
      ✓ should reject invalid address format (1 ms)
    Contract Type Safety
      ✓ should have proper function signatures (1 ms)
      ✓ should have proper return types (1 ms)

Test Suites: 3 failed, 2 passed, 5 total
Tests:       40 failed, 33 passed, 73 total
Snapshots:   0 total
Time:        3.423 s
Ran all test suites matching __tests__.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /home/wethinkcode/Pop Ma Dice/pop-ma-dice
npm error workspace pop-ma-dice@0.1.0
npm error location /home/wethinkcode/Pop Ma Dice/pop-ma-dice
npm error command failed
npm error command sh -c jest __tests__
